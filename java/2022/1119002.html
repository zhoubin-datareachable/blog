<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>阿里云配置DDNS域名解析 | 博客</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.7.1/katex.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.10.0/github-markdown.min.css">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.efd317d0.css" as="style"><link rel="preload" href="/assets/js/app.e5227af6.js" as="script"><link rel="preload" href="/assets/js/6.8d14206a.js" as="script"><link rel="preload" href="/assets/js/1.e2b5cad9.js" as="script"><link rel="preload" href="/assets/js/26.47eebecd.js" as="script"><link rel="prefetch" href="/assets/js/10.7080ec80.js"><link rel="prefetch" href="/assets/js/11.40271f2d.js"><link rel="prefetch" href="/assets/js/12.06541caf.js"><link rel="prefetch" href="/assets/js/13.887054c0.js"><link rel="prefetch" href="/assets/js/14.250cc59e.js"><link rel="prefetch" href="/assets/js/15.66b55d42.js"><link rel="prefetch" href="/assets/js/16.2947d20e.js"><link rel="prefetch" href="/assets/js/17.41dd407b.js"><link rel="prefetch" href="/assets/js/18.dd5484ab.js"><link rel="prefetch" href="/assets/js/19.1d97ef47.js"><link rel="prefetch" href="/assets/js/20.9a147902.js"><link rel="prefetch" href="/assets/js/21.5d31dcbc.js"><link rel="prefetch" href="/assets/js/22.c7decbba.js"><link rel="prefetch" href="/assets/js/23.81c1c6d1.js"><link rel="prefetch" href="/assets/js/24.da4a92f3.js"><link rel="prefetch" href="/assets/js/25.38a0ba5c.js"><link rel="prefetch" href="/assets/js/27.f2d72f98.js"><link rel="prefetch" href="/assets/js/28.973b6364.js"><link rel="prefetch" href="/assets/js/29.6ae69997.js"><link rel="prefetch" href="/assets/js/3.3c035767.js"><link rel="prefetch" href="/assets/js/30.22cb252d.js"><link rel="prefetch" href="/assets/js/31.6087c930.js"><link rel="prefetch" href="/assets/js/32.4124633e.js"><link rel="prefetch" href="/assets/js/33.4242438a.js"><link rel="prefetch" href="/assets/js/34.3b768bf4.js"><link rel="prefetch" href="/assets/js/35.27658bf6.js"><link rel="prefetch" href="/assets/js/36.c3b887af.js"><link rel="prefetch" href="/assets/js/37.53f03094.js"><link rel="prefetch" href="/assets/js/38.8b9dead8.js"><link rel="prefetch" href="/assets/js/39.a59a208d.js"><link rel="prefetch" href="/assets/js/4.4cce32c8.js"><link rel="prefetch" href="/assets/js/40.6c9fcc48.js"><link rel="prefetch" href="/assets/js/41.f20c746a.js"><link rel="prefetch" href="/assets/js/42.2c75f43a.js"><link rel="prefetch" href="/assets/js/43.ea4def38.js"><link rel="prefetch" href="/assets/js/44.a51c2fe0.js"><link rel="prefetch" href="/assets/js/45.8a26b480.js"><link rel="prefetch" href="/assets/js/46.d39d7659.js"><link rel="prefetch" href="/assets/js/47.7d91dd4d.js"><link rel="prefetch" href="/assets/js/48.bc3d9e04.js"><link rel="prefetch" href="/assets/js/49.305f4bd0.js"><link rel="prefetch" href="/assets/js/5.308dbe40.js"><link rel="prefetch" href="/assets/js/50.c664fb79.js"><link rel="prefetch" href="/assets/js/51.889ecac4.js"><link rel="prefetch" href="/assets/js/52.febef48f.js"><link rel="prefetch" href="/assets/js/53.ea435156.js"><link rel="prefetch" href="/assets/js/54.90867006.js"><link rel="prefetch" href="/assets/js/55.72345f3d.js"><link rel="prefetch" href="/assets/js/56.19f4f8d3.js"><link rel="prefetch" href="/assets/js/57.c74b5a56.js"><link rel="prefetch" href="/assets/js/58.85e0e71c.js"><link rel="prefetch" href="/assets/js/59.4f5e0885.js"><link rel="prefetch" href="/assets/js/60.eeef6153.js"><link rel="prefetch" href="/assets/js/61.9b917938.js"><link rel="prefetch" href="/assets/js/62.d21a39dc.js"><link rel="prefetch" href="/assets/js/63.80e8263a.js"><link rel="prefetch" href="/assets/js/64.d597536c.js"><link rel="prefetch" href="/assets/js/7.feb5ebdb.js"><link rel="prefetch" href="/assets/js/8.bd86b95b.js"><link rel="prefetch" href="/assets/js/9.57ad2a2f.js">
    <link rel="stylesheet" href="/assets/css/0.styles.efd317d0.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-5bb33761><div data-v-5bb33761><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-5bb33761 data-v-5bb33761><h3 class="title" data-v-59e6cb88>博客</h3> <p class="description" data-v-59e6cb88></p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>土豆</span>
          
        <span data-v-59e6cb88>2021 - </span>
        2022
      </a></span></div></div> <div class="hide" data-v-5bb33761><header class="navbar" data-v-5bb33761><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">博客</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  home
</a></div><div class="nav-item"><a href="/other/2022/0929001.html" class="nav-link"><i class="iconfont reco-other"></i>
  软件
</a></div><div class="nav-item"><a href="https://github.com/zhoubin-datareachable" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://support.qq.com/product/435903" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-suggestion"></i>
  留言板
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-5bb33761></div> <aside class="sidebar" data-v-5bb33761><div class="personal-info-wrapper" data-v-1fad0c41 data-v-5bb33761><img src="/avatar.jpg" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    土豆
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>53</h3> <h6 data-v-1fad0c41>文章</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>25</h3> <h6 data-v-1fad0c41>标签</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  home
</a></div><div class="nav-item"><a href="/other/2022/0929001.html" class="nav-link"><i class="iconfont reco-other"></i>
  软件
</a></div><div class="nav-item"><a href="https://github.com/zhoubin-datareachable" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://support.qq.com/product/435903" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-suggestion"></i>
  留言板
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-5bb33761><h3 class="title" data-v-59e6cb88>阿里云配置DDNS域名解析</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>土豆</span>
          
        <span data-v-59e6cb88>2021 - </span>
        2022
      </a></span></div></div> <div data-v-5bb33761><div data-v-5bb33761><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">阿里云配置DDNS域名解析</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>土豆</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2022/11/19</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>java</span><span class="tag-item" data-v-8a445198>ddns</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="获取accesskey"><a href="#获取accesskey" class="header-anchor">#</a> 获取AccessKey</h2> <p><a href="https://usercenter.console.aliyun.com/?spm=a2c4g.11186623.0.0.4b8875a9XMsEjB#/manage/ak" target="_blank" rel="noopener noreferrer">AccessKey管理页面<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="/assets/img/image-20221119142526332.7490d47c.png" alt="image-20221119142526332"></p> <p><strong>1.创建子用户</strong></p> <p><img src="/assets/img/image-20221119142624708.2a53802c.png" alt="image-20221119142624708"></p> <p><strong>2.保存ID和Secret</strong></p> <p><img src="/assets/img/image-20221119142934840.ceb2ed72.png" alt="image-20221119142934840"></p> <p><strong>配置权限</strong></p> <p><img src="/assets/img/image-20221119142728186.05c173f2.png" alt="image-20221119142728186"></p> <h2 id="编写代码"><a href="#编写代码" class="header-anchor">#</a> 编写代码</h2> <ul><li><a href="https://help.aliyun.com/document_detail/431629.html?spm=a2c1d.8251892.help.dexternal.74f45b76eXFSzs&amp;scm=20140722.S_help%40%40%E6%96%87%E6%A1%A3%40%40431629.S_hot%2Bos0.ID_431629-RL_ddns-LOC_consoleUNDhelp-OR_ser-V_2-P0_0" target="_blank" rel="noopener noreferrer">官方网址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://help.aliyun.com/document_detail/198326.html?spm=5176.21213303.J_6704733920.7.14f053c9xflK1U&amp;scm=20140722.S_help%40%40%E6%96%87%E6%A1%A3%40%40198326._.ID_help%40%40%E6%96%87%E6%A1%A3%40%40198326-RL_%E5%9C%B0%E5%9F%9Fid-LOC_main-OR_ser-V_2-P0_0" target="_blank" rel="noopener noreferrer">地域ID网址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p><strong>添加maven依赖</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
     <span class="token comment">&lt;!-- https://mvnrepository.com/artifact/com.aliyun/aliyun-java-sdk-core --&gt;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aliyun-java-sdk-core<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.4.3<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
     <span class="token comment">&lt;!-- https://mvnrepository.com/artifact/com.aliyun/aliyun-java-sdk-alidns --&gt;</span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.aliyun<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>aliyun-java-sdk-alidns<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.0.10<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>编写代码</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyuncs<span class="token punctuation">.</span></span><span class="token class-name">DefaultAcsClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyuncs<span class="token punctuation">.</span></span><span class="token class-name">IAcsClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyuncs<span class="token punctuation">.</span>alidns<span class="token punctuation">.</span>model<span class="token punctuation">.</span>v20150109<span class="token punctuation">.</span></span><span class="token class-name">DescribeDomainRecordsRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyuncs<span class="token punctuation">.</span>alidns<span class="token punctuation">.</span>model<span class="token punctuation">.</span>v20150109<span class="token punctuation">.</span></span><span class="token class-name">DescribeDomainRecordsResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyuncs<span class="token punctuation">.</span>alidns<span class="token punctuation">.</span>model<span class="token punctuation">.</span>v20150109<span class="token punctuation">.</span></span><span class="token class-name">UpdateDomainRecordRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyuncs<span class="token punctuation">.</span>alidns<span class="token punctuation">.</span>model<span class="token punctuation">.</span>v20150109<span class="token punctuation">.</span></span><span class="token class-name">UpdateDomainRecordResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyuncs<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span></span><span class="token class-name">ClientException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyuncs<span class="token punctuation">.</span>profile<span class="token punctuation">.</span></span><span class="token class-name">DefaultProfile</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>google<span class="token punctuation">.</span>gson<span class="token punctuation">.</span></span><span class="token class-name">Gson</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">BufferedReader</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStreamReader</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">HttpURLConnection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">URL</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Matcher</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Pattern</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 动态域名解析
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DDNS</span> <span class="token punctuation">{</span>

    <span class="token comment">/**
     * 获取主域名的所有解析记录列表
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">DescribeDomainRecordsResponse</span> <span class="token function">describeDomainRecords</span><span class="token punctuation">(</span><span class="token class-name">DescribeDomainRecordsRequest</span> request<span class="token punctuation">,</span>
            <span class="token class-name">IAcsClient</span> client<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// 调用SDK发送请求</span>
            <span class="token keyword">return</span> client<span class="token punctuation">.</span><span class="token function">getAcsResponse</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClientException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 发生调用错误，抛出运行时异常</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 获取当前主机公网IP
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getCurrentHostIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这里使用jsonip.com第三方接口获取本地IP</span>
        <span class="token class-name">String</span> jsonip <span class="token operator">=</span> <span class="token string">&quot;https://jsonip.com/&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// 接口返回结果</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">BufferedReader</span> in <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// 使用HttpURLConnection网络请求第三方接口</span>
            <span class="token class-name">URL</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>jsonip<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">HttpURLConnection</span> urlConnection <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpURLConnection</span><span class="token punctuation">)</span> url<span class="token punctuation">.</span><span class="token function">openConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            urlConnection<span class="token punctuation">.</span><span class="token function">setRequestMethod</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            urlConnection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>
                    urlConnection<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> line<span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                result <span class="token operator">+=</span> line<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 使用finally块来关闭输入流</span>
        <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>in <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    in<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e2<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span>
        <span class="token comment">// 正则表达式，提取xxx.xxx.xxx.xxx，将IP地址从接口返回结果中提取出来</span>
        <span class="token class-name">String</span> rexp <span class="token operator">=</span> <span class="token string">&quot;(\\d{1,3}\\.){3}\\d{1,3}&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Pattern</span> pat <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>rexp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Matcher</span> mat <span class="token operator">=</span> pat<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> res <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>mat<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            res <span class="token operator">=</span> mat<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 修改解析记录
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">UpdateDomainRecordResponse</span> <span class="token function">updateDomainRecord</span><span class="token punctuation">(</span><span class="token class-name">UpdateDomainRecordRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">IAcsClient</span> client<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// 调用SDK发送请求</span>
            <span class="token keyword">return</span> client<span class="token punctuation">.</span><span class="token function">getAcsResponse</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClientException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 发生调用错误，抛出运行时异常</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">log_print</span><span class="token punctuation">(</span><span class="token class-name">String</span> functionName<span class="token punctuation">,</span> <span class="token class-name">Object</span> result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Gson</span> gson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Gson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;-------------------------------&quot;</span> <span class="token operator">+</span> functionName <span class="token operator">+</span> <span class="token string">&quot;-------------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>gson<span class="token punctuation">.</span><span class="token function">toJson</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 设置鉴权参数，初始化客户端</span>
        <span class="token class-name">DefaultProfile</span> profile <span class="token operator">=</span> <span class="token class-name">DefaultProfile</span><span class="token punctuation">.</span><span class="token function">getProfile</span><span class="token punctuation">(</span>
                <span class="token string">&quot;cn-qingdao&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 地域ID</span>
                <span class="token string">&quot;xxxxx&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 您的AccessKey ID</span>
                <span class="token string">&quot;xxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 您的AccessKey Secret</span>
        <span class="token class-name">IAcsClient</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultAcsClient</span><span class="token punctuation">(</span>profile<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DDNS</span> ddns <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DDNS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 查询指定二级域名的最新解析记录</span>
        <span class="token class-name">DescribeDomainRecordsRequest</span> describeDomainRecordsRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DescribeDomainRecordsRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 主域名</span>
        describeDomainRecordsRequest<span class="token punctuation">.</span><span class="token function">setDomainName</span><span class="token punctuation">(</span><span class="token string">&quot;reachable.cool&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 主机记录</span>
        describeDomainRecordsRequest<span class="token punctuation">.</span><span class="token function">setRRKeyWord</span><span class="token punctuation">(</span><span class="token string">&quot;ddns&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 解析记录类型</span>
        describeDomainRecordsRequest<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DescribeDomainRecordsResponse</span> describeDomainRecordsResponse <span class="token operator">=</span> ddns
                <span class="token punctuation">.</span><span class="token function">describeDomainRecords</span><span class="token punctuation">(</span>describeDomainRecordsRequest<span class="token punctuation">,</span> client<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">log_print</span><span class="token punctuation">(</span><span class="token string">&quot;describeDomainRecords&quot;</span><span class="token punctuation">,</span> describeDomainRecordsResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DescribeDomainRecordsResponse<span class="token punctuation">.</span>Record</span><span class="token punctuation">&gt;</span></span> domainRecords <span class="token operator">=</span> describeDomainRecordsResponse<span class="token punctuation">.</span><span class="token function">getDomainRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 最新的一条解析记录</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>domainRecords<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">DescribeDomainRecordsResponse<span class="token punctuation">.</span>Record</span> record <span class="token operator">=</span> domainRecords<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 记录ID</span>
            <span class="token class-name">String</span> recordId <span class="token operator">=</span> record<span class="token punctuation">.</span><span class="token function">getRecordId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 记录值</span>
            <span class="token class-name">String</span> recordsValue <span class="token operator">=</span> record<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 当前主机公网IP</span>
            <span class="token class-name">String</span> currentHostIP <span class="token operator">=</span> ddns<span class="token punctuation">.</span><span class="token function">getCurrentHostIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>
                    <span class="token string">&quot;-------------------------------当前主机公网IP为：&quot;</span> <span class="token operator">+</span> currentHostIP <span class="token operator">+</span>
                            <span class="token string">&quot;-------------------------------&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>currentHostIP<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>recordsValue<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 修改解析记录</span>
                <span class="token class-name">UpdateDomainRecordRequest</span> updateDomainRecordRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UpdateDomainRecordRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 主机记录</span>
                updateDomainRecordRequest<span class="token punctuation">.</span><span class="token function">setRR</span><span class="token punctuation">(</span><span class="token string">&quot;ddnstest&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 记录ID</span>
                updateDomainRecordRequest<span class="token punctuation">.</span><span class="token function">setRecordId</span><span class="token punctuation">(</span>recordId<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 将主机记录值改为当前主机IP</span>
                updateDomainRecordRequest<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>currentHostIP<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 解析记录类型</span>
                updateDomainRecordRequest<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token class-name">UpdateDomainRecordResponse</span> updateDomainRecordResponse <span class="token operator">=</span> ddns
                        <span class="token punctuation">.</span><span class="token function">updateDomainRecord</span><span class="token punctuation">(</span>updateDomainRecordRequest<span class="token punctuation">,</span> client<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">log_print</span><span class="token punctuation">(</span><span class="token string">&quot;updateDomainRecord&quot;</span><span class="token punctuation">,</span> updateDomainRecordResponse<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="配置日志"><a href="#配置日志" class="header-anchor">#</a> 配置日志</h2> <p><strong>1.jar包</strong></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>log4j<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>1.2.17<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>2.日志配置问卷</strong></p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token comment"># log4j.properties</span>
<span class="token comment"># src/main/resources</span>

<span class="token comment">### 设置###</span>
<span class="token key attr-name">log4j.rootLogger</span> <span class="token punctuation">=</span> <span class="token value attr-value">debug,D,E</span>
<span class="token comment">### 输出INFO 级别以上的日志到=D://logs/info.log ###</span>
<span class="token key attr-name">log4j.appender.D</span> <span class="token punctuation">=</span> <span class="token value attr-value">org.apache.log4j.DailyRollingFileAppender</span>
<span class="token key attr-name">log4j.appender.D.File</span> <span class="token punctuation">=</span> <span class="token value attr-value">D://logs/info.log</span>
<span class="token key attr-name">log4j.appender.D.Append</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span>
<span class="token key attr-name">log4j.appender.D.Encoding</span><span class="token punctuation">=</span><span class="token value attr-value">UTF8</span>
<span class="token key attr-name">log4j.appender.D.Threshold</span> <span class="token punctuation">=</span> <span class="token value attr-value">INFO</span>
<span class="token key attr-name">log4j.appender.D.layout</span> <span class="token punctuation">=</span> <span class="token value attr-value">org.apache.log4j.PatternLayout</span>
<span class="token key attr-name">log4j.appender.D.layout.ConversionPattern</span> <span class="token punctuation">=</span> <span class="token value attr-value">%-d{yyyy-MM-dd HH:mm:ss}  - [ %p ] - %m %n</span>
<span class="token comment">### 输出ERROR 级别以上的日志到=D://logs/error.log ###</span>
<span class="token key attr-name">log4j.appender.E</span> <span class="token punctuation">=</span> <span class="token value attr-value">org.apache.log4j.DailyRollingFileAppender</span>
<span class="token key attr-name">log4j.appender.E.File</span> <span class="token punctuation">=</span><span class="token value attr-value">D://logs/error.log</span>
<span class="token key attr-name">log4j.appender.E.Append</span> <span class="token punctuation">=</span> <span class="token value attr-value">true</span>
<span class="token key attr-name">log4j.appender.E.Encoding</span><span class="token punctuation">=</span><span class="token value attr-value">UTF8</span>
<span class="token key attr-name">log4j.appender.E.Threshold</span> <span class="token punctuation">=</span> <span class="token value attr-value">ERROR</span>
<span class="token key attr-name">log4j.appender.E.layout</span> <span class="token punctuation">=</span> <span class="token value attr-value">org.apache.log4j.PatternLayout</span>
<span class="token key attr-name">log4j.appender.E.layout.ConversionPattern</span> <span class="token punctuation">=</span> <span class="token value attr-value">%-d{yyyy-MM-dd HH:mm:ss}  - [ %p ] - %m %n</span>
</code></pre></div><h2 id="重写代码"><a href="#重写代码" class="header-anchor">#</a> 重写代码</h2> <p><img src="data:image/png;base64,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" alt="image-20221119154354557"></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>example</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyuncs<span class="token punctuation">.</span></span><span class="token class-name">DefaultAcsClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyuncs<span class="token punctuation">.</span></span><span class="token class-name">IAcsClient</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyuncs<span class="token punctuation">.</span>alidns<span class="token punctuation">.</span>model<span class="token punctuation">.</span>v20150109<span class="token punctuation">.</span></span><span class="token class-name">DescribeDomainRecordsRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyuncs<span class="token punctuation">.</span>alidns<span class="token punctuation">.</span>model<span class="token punctuation">.</span>v20150109<span class="token punctuation">.</span></span><span class="token class-name">DescribeDomainRecordsResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyuncs<span class="token punctuation">.</span>alidns<span class="token punctuation">.</span>model<span class="token punctuation">.</span>v20150109<span class="token punctuation">.</span></span><span class="token class-name">UpdateDomainRecordRequest</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyuncs<span class="token punctuation">.</span>alidns<span class="token punctuation">.</span>model<span class="token punctuation">.</span>v20150109<span class="token punctuation">.</span></span><span class="token class-name">UpdateDomainRecordResponse</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyuncs<span class="token punctuation">.</span>exceptions<span class="token punctuation">.</span></span><span class="token class-name">ClientException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>aliyuncs<span class="token punctuation">.</span>profile<span class="token punctuation">.</span></span><span class="token class-name">DefaultProfile</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">BufferedReader</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">InputStreamReader</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">HttpURLConnection</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>net<span class="token punctuation">.</span></span><span class="token class-name">URL</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">List</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Matcher</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>regex<span class="token punctuation">.</span></span><span class="token class-name">Pattern</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>log4j<span class="token punctuation">.</span></span><span class="token class-name">Logger</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * 动态域名解析
 */</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DDNS</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">Logger</span> logger <span class="token operator">=</span> <span class="token class-name">Logger</span><span class="token punctuation">.</span><span class="token function">getLogger</span><span class="token punctuation">(</span><span class="token constant">DDNS</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/**
     * 获取主域名的所有解析记录列表
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">DescribeDomainRecordsResponse</span> <span class="token function">describeDomainRecords</span><span class="token punctuation">(</span><span class="token class-name">DescribeDomainRecordsRequest</span> request<span class="token punctuation">,</span>
            <span class="token class-name">IAcsClient</span> client<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// 调用SDK发送请求</span>
            <span class="token keyword">return</span> client<span class="token punctuation">.</span><span class="token function">getAcsResponse</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClientException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 发生调用错误，抛出运行时异常</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 获取当前主机公网IP
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getCurrentHostIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 这里使用jsonip.com第三方接口获取本地IP</span>
        <span class="token class-name">String</span> jsonip <span class="token operator">=</span> <span class="token string">&quot;https://jsonip.com/&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">// 接口返回结果</span>
        <span class="token class-name">String</span> result <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">BufferedReader</span> in <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token comment">// 使用HttpURLConnection网络请求第三方接口</span>
            <span class="token class-name">URL</span> url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>jsonip<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">HttpURLConnection</span> urlConnection <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpURLConnection</span><span class="token punctuation">)</span> url<span class="token punctuation">.</span><span class="token function">openConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            urlConnection<span class="token punctuation">.</span><span class="token function">setRequestMethod</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            urlConnection<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            in <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BufferedReader</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span>
                    urlConnection<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">String</span> line<span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> in<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                result <span class="token operator">+=</span> line<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 使用finally块来关闭输入流</span>
        <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>in <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    in<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e2<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

        <span class="token punctuation">}</span>
        <span class="token comment">// 正则表达式，提取xxx.xxx.xxx.xxx，将IP地址从接口返回结果中提取出来</span>
        <span class="token class-name">String</span> rexp <span class="token operator">=</span> <span class="token string">&quot;(\\d{1,3}\\.){3}\\d{1,3}&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">Pattern</span> pat <span class="token operator">=</span> <span class="token class-name">Pattern</span><span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span>rexp<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Matcher</span> mat <span class="token operator">=</span> pat<span class="token punctuation">.</span><span class="token function">matcher</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> res <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>mat<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            res <span class="token operator">=</span> mat<span class="token punctuation">.</span><span class="token function">group</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> res<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 修改解析记录
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">UpdateDomainRecordResponse</span> <span class="token function">updateDomainRecord</span><span class="token punctuation">(</span><span class="token class-name">UpdateDomainRecordRequest</span> request<span class="token punctuation">,</span> <span class="token class-name">IAcsClient</span> client<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;更新IP成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 调用SDK发送请求</span>
            <span class="token keyword">return</span> client<span class="token punctuation">.</span><span class="token function">getAcsResponse</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">ClientException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            logger<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&quot;解析出错&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 发生调用错误，抛出运行时异常</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 设置鉴权参数，初始化客户端</span>
        <span class="token class-name">DefaultProfile</span> profile <span class="token operator">=</span> <span class="token class-name">DefaultProfile</span><span class="token punctuation">.</span><span class="token function">getProfile</span><span class="token punctuation">(</span>
                <span class="token string">&quot;cn-qingdao&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 地域ID</span>
                <span class="token string">&quot;xxxxxxx&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 您的AccessKey ID</span>
                <span class="token string">&quot;xxxxx&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 您的AccessKey Secret</span>
        <span class="token class-name">IAcsClient</span> client <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultAcsClient</span><span class="token punctuation">(</span>profile<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DDNS</span> ddns <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DDNS</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 查询指定二级域名的最新解析记录</span>
        <span class="token class-name">DescribeDomainRecordsRequest</span> describeDomainRecordsRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DescribeDomainRecordsRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 主域名</span>
        describeDomainRecordsRequest<span class="token punctuation">.</span><span class="token function">setDomainName</span><span class="token punctuation">(</span><span class="token string">&quot;reachable.cool&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 主机记录</span>
        describeDomainRecordsRequest<span class="token punctuation">.</span><span class="token function">setRRKeyWord</span><span class="token punctuation">(</span><span class="token string">&quot;ddns&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 解析记录类型</span>
        describeDomainRecordsRequest<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">DescribeDomainRecordsResponse</span> describeDomainRecordsResponse <span class="token operator">=</span> ddns
                <span class="token punctuation">.</span><span class="token function">describeDomainRecords</span><span class="token punctuation">(</span>describeDomainRecordsRequest<span class="token punctuation">,</span> client<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DescribeDomainRecordsResponse<span class="token punctuation">.</span>Record</span><span class="token punctuation">&gt;</span></span> domainRecords <span class="token operator">=</span> describeDomainRecordsResponse<span class="token punctuation">.</span><span class="token function">getDomainRecords</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 最新的一条解析记录</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>domainRecords<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">DescribeDomainRecordsResponse<span class="token punctuation">.</span>Record</span> record <span class="token operator">=</span> domainRecords<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 记录ID</span>
            <span class="token class-name">String</span> recordId <span class="token operator">=</span> record<span class="token punctuation">.</span><span class="token function">getRecordId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 记录值</span>
            <span class="token class-name">String</span> recordsValue <span class="token operator">=</span> record<span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">// 当前主机公网IP</span>
            <span class="token class-name">String</span> currentHostIP <span class="token operator">=</span> ddns<span class="token punctuation">.</span><span class="token function">getCurrentHostIP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            logger<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;公网IP为:&quot;</span> <span class="token operator">+</span> currentHostIP<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>currentHostIP<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>recordsValue<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// 修改解析记录</span>
                <span class="token class-name">UpdateDomainRecordRequest</span> updateDomainRecordRequest <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UpdateDomainRecordRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 主机记录</span>
                updateDomainRecordRequest<span class="token punctuation">.</span><span class="token function">setRR</span><span class="token punctuation">(</span><span class="token string">&quot;ddns&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 记录ID</span>
                updateDomainRecordRequest<span class="token punctuation">.</span><span class="token function">setRecordId</span><span class="token punctuation">(</span>recordId<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 将主机记录值改为当前主机IP</span>
                updateDomainRecordRequest<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>currentHostIP<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// 解析记录类型</span>
                updateDomainRecordRequest<span class="token punctuation">.</span><span class="token function">setType</span><span class="token punctuation">(</span><span class="token string">&quot;A&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                ddns<span class="token punctuation">.</span><span class="token function">updateDomainRecord</span><span class="token punctuation">(</span>updateDomainRecordRequest<span class="token punctuation">,</span> client<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="打包"><a href="#打包" class="header-anchor">#</a> 打包</h2> <p><strong>1.配置maven打包插件</strong></p> <p><img src="data:image/png;base64,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" alt="image-20221119154105019"></p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- 使用maven-assembly-plugin插件打包 --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.maven.plugins<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>maven-assembly-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>archive</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>manifest</span><span class="token punctuation">&gt;</span></span>
                    	<span class="token comment">&lt;!-- 配置入口main方法类所在路径 --&gt;</span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mainClass</span><span class="token punctuation">&gt;</span></span>com.example.DDNS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mainClass</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>manifest</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>archive</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>descriptorRefs</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>descriptorRef</span><span class="token punctuation">&gt;</span></span>jar-with-dependencies<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>descriptorRef</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>descriptorRefs</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>executions</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>execution</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>make-assembly<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>phase</span><span class="token punctuation">&gt;</span></span>package<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>phase</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goals</span><span class="token punctuation">&gt;</span></span>
                        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>goal</span><span class="token punctuation">&gt;</span></span>single<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goal</span><span class="token punctuation">&gt;</span></span>
                    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>goals</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>execution</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>executions</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>2.打包</strong></p> <div class="language- extra-class"><pre class="language-text"><code>mvn package
</code></pre></div><p><strong>3.运行</strong></p> <div class="language- extra-class"><pre class="language-text"><code>java -jar demo-1.0-SNAPSHOT-jar-with-dependencies.jar
</code></pre></div><p><img src="/assets/img/image-20221119154138019.9f62a53b.png" alt="image-20221119154138019"></p></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-ac050c62><li class="level-2" data-v-ac050c62><a href="/java/2022/1119002.html#获取accesskey" class="sidebar-link reco-side-获取accesskey" data-v-ac050c62>获取AccessKey</a></li><li class="level-2" data-v-ac050c62><a href="/java/2022/1119002.html#编写代码" class="sidebar-link reco-side-编写代码" data-v-ac050c62>编写代码</a></li><li class="level-2" data-v-ac050c62><a href="/java/2022/1119002.html#配置日志" class="sidebar-link reco-side-配置日志" data-v-ac050c62>配置日志</a></li><li class="level-2" data-v-ac050c62><a href="/java/2022/1119002.html#重写代码" class="sidebar-link reco-side-重写代码" data-v-ac050c62>重写代码</a></li><li class="level-2" data-v-ac050c62><a href="/java/2022/1119002.html#打包" class="sidebar-link reco-side-打包" data-v-ac050c62>打包</a></li></ul></main></div> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.e5227af6.js" defer></script><script src="/assets/js/6.8d14206a.js" defer></script><script src="/assets/js/1.e2b5cad9.js" defer></script><script src="/assets/js/26.47eebecd.js" defer></script>
  </body>
</html>
